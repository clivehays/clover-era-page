<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reseller Agreement | Clover ERA</title>
    <meta name="description" content="Complete and sign your Clover ERA Reseller Agreement online">
    <link rel="icon" type="image/svg+xml" href="/images/clover-favicon.svg">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root {
            --primary-teal: #46AEB8;
            --deep-teal: #0D7C88;
            --bronze: #C9A667;
            --charcoal: #2C3E50;
            --light-gray: #F8F9FA;
            --medium-gray: #E5E7EB;
            --text-primary: #1F2937;
            --text-secondary: #6B7280;
            --white: #FFFFFF;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 2rem 1rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--primary-teal);
            margin-bottom: 0.5rem;
        }

        .header p {
            font-size: 1.2rem;
            color: var(--text-secondary);
        }

        .main-card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            margin-bottom: 2rem;
        }

        .card-header {
            background: linear-gradient(135deg, var(--primary-teal), var(--deep-teal));
            color: white;
            padding: 2rem;
            text-align: center;
        }

        .card-header h2 {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .card-body {
            padding: 3rem 2rem;
        }

        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 3rem;
            padding: 0 1rem;
        }

        .step {
            flex: 1;
            text-align: center;
            position: relative;
        }

        .step::after {
            content: '';
            position: absolute;
            top: 20px;
            left: 50%;
            width: 100%;
            height: 2px;
            background: var(--medium-gray);
            z-index: -1;
        }

        .step:last-child::after {
            display: none;
        }

        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--medium-gray);
            color: var(--text-secondary);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .step.active .step-number {
            background: var(--primary-teal);
            color: white;
        }

        .step.completed .step-number {
            background: var(--bronze);
            color: white;
        }

        .step-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .form-section {
            display: none;
        }

        .form-section.active {
            display: block;
        }

        .section-title {
            font-size: 1.5rem;
            color: var(--charcoal);
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 3px solid var(--medium-gray);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            font-weight: 600;
            color: var(--charcoal);
            margin-bottom: 0.5rem;
        }

        .form-group .required {
            color: #EF4444;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            font-size: 1rem;
            border: 2px solid var(--medium-gray);
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-teal);
            box-shadow: 0 0 0 3px rgba(70, 174, 184, 0.1);
        }

        .signature-section {
            background: var(--light-gray);
            padding: 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
        }

        .signature-canvas {
            border: 2px solid var(--medium-gray);
            border-radius: 8px;
            background: white;
            cursor: crosshair;
            width: 100%;
            height: 200px;
            display: block;
        }

        .signature-controls {
            margin-top: 1rem;
            display: flex;
            gap: 1rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-teal), var(--deep-teal));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(70, 174, 184, 0.3);
        }

        .btn-secondary {
            background: var(--medium-gray);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            background: var(--text-secondary);
            color: white;
        }

        .btn-clear {
            background: transparent;
            color: var(--text-secondary);
            border: 2px solid var(--medium-gray);
        }

        .btn-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 2px solid var(--medium-gray);
        }

        .agreement-preview {
            background: var(--light-gray);
            padding: 2rem;
            border-radius: 12px;
            max-height: 500px;
            overflow-y: auto;
            margin-bottom: 2rem;
            font-size: 0.95rem;
            line-height: 1.8;
        }

        .agreement-preview h3 {
            color: var(--charcoal);
            margin-top: 1.5rem;
            margin-bottom: 1rem;
        }

        .agreement-preview p {
            margin-bottom: 1rem;
        }

        .info-box {
            background: rgba(70, 174, 184, 0.1);
            border-left: 4px solid var(--primary-teal);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
        }

        .download-section {
            text-align: center;
            padding: 2rem;
            background: linear-gradient(135deg, rgba(201, 166, 103, 0.1), rgba(201, 166, 103, 0.05));
            border-radius: 12px;
        }

        .download-section h3 {
            color: var(--charcoal);
            margin-bottom: 1rem;
        }

        .commission-link {
            display: inline-block;
            margin-top: 1rem;
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, var(--bronze), #B8934D);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .commission-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(201, 166, 103, 0.3);
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }

            .card-body {
                padding: 2rem 1rem;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .step-indicator {
                flex-direction: column;
                gap: 1rem;
            }

            .step::after {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Reseller Agreement</h1>
            <p>Complete and electronically sign your Clover ERA Reseller Agreement</p>
        </div>

        <div class="main-card">
            <div class="card-header">
                <h2>Clover ERA Reseller Agreement</h2>
                <p>Please complete all sections to generate your signed agreement</p>
            </div>

            <div class="card-body">
                <div class="step-indicator">
                    <div class="step active" data-step="1">
                        <div class="step-number">1</div>
                        <div class="step-label">Company Info</div>
                    </div>
                    <div class="step" data-step="2">
                        <div class="step-number">2</div>
                        <div class="step-label">Review Agreement</div>
                    </div>
                    <div class="step" data-step="3">
                        <div class="step-number">3</div>
                        <div class="step-label">Sign & Download</div>
                    </div>
                </div>

                <!-- Step 1: Company Information -->
                <div class="form-section active" id="step1">
                    <h3 class="section-title">Company Information</h3>

                    <div class="form-grid">
                        <div class="form-group">
                            <label>Effective Date <span class="required">*</span></label>
                            <input type="date" id="effectiveDate" required>
                        </div>

                        <div class="form-group">
                            <label>Reseller Company Name <span class="required">*</span></label>
                            <input type="text" id="companyName" placeholder="Your Company LLC" required>
                        </div>
                    </div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label>Entity Type <span class="required">*</span></label>
                            <select id="entityType" required>
                                <option value="">Select entity type...</option>
                                <option value="LLC">Limited Liability Company (LLC)</option>
                                <option value="Corporation">Corporation</option>
                                <option value="Partnership">Partnership</option>
                                <option value="Sole Proprietorship">Sole Proprietorship</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Jurisdiction (State/Country) <span class="required">*</span></label>
                            <input type="text" id="jurisdiction" placeholder="e.g., Delaware, California" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Principal Business Address <span class="required">*</span></label>
                        <textarea id="businessAddress" rows="3" placeholder="Street Address&#10;City, State ZIP&#10;Country" required></textarea>
                    </div>

                    <h3 class="section-title" style="margin-top: 3rem;">Authorized Signatory Information</h3>

                    <div class="form-grid">
                        <div class="form-group">
                            <label>Signatory Name <span class="required">*</span></label>
                            <input type="text" id="signatoryName" placeholder="Full Name" required>
                        </div>

                        <div class="form-group">
                            <label>Signatory Title <span class="required">*</span></label>
                            <input type="text" id="signatoryTitle" placeholder="e.g., CEO, President" required>
                        </div>
                    </div>

                    <div class="form-grid">
                        <div class="form-group">
                            <label>Email Address <span class="required">*</span></label>
                            <input type="email" id="signatoryEmail" placeholder="email@company.com" required>
                        </div>

                        <div class="form-group">
                            <label>Phone Number <span class="required">*</span></label>
                            <input type="tel" id="signatoryPhone" placeholder="(555) 123-4567" required>
                        </div>
                    </div>

                    <div class="btn-navigation">
                        <div></div>
                        <button class="btn btn-primary" onclick="goToStep(2)">Continue to Review ‚Üí</button>
                    </div>
                </div>

                <!-- Step 2: Review Agreement -->
                <div class="form-section" id="step2">
                    <h3 class="section-title">Review Agreement Terms</h3>

                    <div class="info-box">
                        <strong>Please review the complete agreement terms below.</strong> This is the legal agreement that will be generated with your company information.
                    </div>

                    <div class="download-section">
                        <h3>Commission Structure</h3>
                        <p>Before proceeding, please review the Reseller Commission Structure document:</p>
                        <a href="/downloads/Clover_ERA_Reseller_Commission_Structure.pdf" download class="commission-link">
                            üì• Download Commission Structure (PDF)
                        </a>
                    </div>

                    <div class="agreement-preview">
                        <h2 style="text-align: center; color: var(--primary-teal);">CLOVER ERA RESELLER AGREEMENT</h2>

                        <p>This Reseller Agreement ("Agreement") is entered into as of <strong><span id="previewDate"></span></strong> ("Effective Date"), by and between:</p>

                        <p><strong>Clover ERA LLC</strong>, a Delaware limited liability company with its principal place of business at 1234 Business Blvd, Suite 100, Wilmington, DE 19801 ("Clover ERA" or "Company"), and</p>

                        <p><strong><span id="previewCompany"></span></strong>, a <strong><span id="previewEntity"></span></strong> organized under the laws of <strong><span id="previewJurisdiction"></span></strong>, with its principal place of business at <strong><span id="previewAddress"></span></strong> ("Reseller").</p>

                        <h3>RECITALS</h3>
                        <p>WHEREAS, Clover ERA has developed and operates a manager enablement platform (the "Platform") designed to help organizations improve employee engagement and reduce workplace turnover;</p>
                        <p>WHEREAS, Reseller desires to market, promote, and resell licenses to the Platform to end customers; and</p>
                        <p>WHEREAS, the parties wish to establish the terms and conditions under which Reseller will resell the Platform.</p>
                        <p>NOW, THEREFORE, in consideration of the mutual covenants and agreements set forth herein, the parties agree as follows:</p>

                        <h3>1. APPOINTMENT AND SCOPE</h3>
                        <p>1.1 <strong>Appointment.</strong> Clover ERA hereby appoints Reseller as a non-exclusive reseller of the Platform, and Reseller accepts such appointment, subject to the terms and conditions of this Agreement.</p>
                        <p>1.2 <strong>Territory.</strong> Reseller may market and sell the Platform within the United States and such other territories as may be mutually agreed upon in writing by the parties.</p>
                        <p>1.3 <strong>No Exclusivity.</strong> This Agreement is non-exclusive. Clover ERA retains the right to sell the Platform directly and through other resellers, distributors, or channels.</p>

                        <h3>2. RESELLER OBLIGATIONS</h3>
                        <p>2.1 <strong>Marketing and Sales.</strong> Reseller shall use commercially reasonable efforts to market, promote, and sell licenses to the Platform to prospective customers within the Territory.</p>
                        <p>2.2 <strong>Compliance.</strong> Reseller shall comply with all applicable laws, regulations, and industry standards in connection with its activities under this Agreement.</p>
                        <p>2.3 <strong>Brand Standards.</strong> Reseller shall use Clover ERA's trademarks, logos, and marketing materials only in accordance with Clover ERA's brand guidelines as provided from time to time.</p>
                        <p>2.4 <strong>Customer Qualification.</strong> Reseller shall qualify prospective customers to ensure they meet Clover ERA's minimum requirements for Platform usage.</p>

                        <h3>3. PRICING AND COMMISSIONS</h3>
                        <p>3.1 <strong>Pricing.</strong> Clover ERA shall establish the pricing for Platform licenses. Reseller shall not modify or discount such pricing without Clover ERA's prior written approval.</p>
                        <p>3.2 <strong>Commission Structure.</strong> Reseller shall receive commissions on Platform license sales in accordance with the Commission Structure attached as Exhibit A and incorporated herein by reference.</p>
                        <p>3.3 <strong>Commission Payment.</strong> Commissions shall be paid monthly within thirty (30) days following the end of each calendar month, based on collected revenue from customers referred by Reseller.</p>
                        <p>3.4 <strong>Commission Modifications.</strong> Clover ERA reserves the right to modify the commission structure upon ninety (90) days' written notice to Reseller. Such modifications shall apply to new sales only.</p>

                        <h3>4. CUSTOMER RELATIONSHIPS</h3>
                        <p>4.1 <strong>Customer Agreements.</strong> All end customers shall enter into Clover ERA's standard customer agreement. Reseller shall not enter into any agreement on behalf of Clover ERA.</p>
                        <p>4.2 <strong>Customer Support.</strong> Clover ERA shall be responsible for providing all technical support and customer service to end customers. Reseller may provide first-level support as mutually agreed.</p>
                        <p>4.3 <strong>Customer Data.</strong> Reseller acknowledges that all customer data, usage information, and related information belongs to Clover ERA and the end customer, not to Reseller.</p>

                        <h3>5. INTELLECTUAL PROPERTY</h3>
                        <p>5.1 <strong>Ownership.</strong> Clover ERA retains all right, title, and interest in and to the Platform, including all intellectual property rights therein. This Agreement does not transfer any ownership rights to Reseller.</p>
                        <p>5.2 <strong>License to Use Marks.</strong> Clover ERA grants Reseller a limited, non-exclusive, non-transferable license to use Clover ERA's trademarks and marketing materials solely for the purpose of marketing and selling the Platform in accordance with this Agreement.</p>
                        <p>5.3 <strong>Feedback.</strong> Any suggestions, feedback, or ideas provided by Reseller regarding the Platform shall be owned by Clover ERA and may be used without restriction or compensation to Reseller.</p>

                        <h3>6. CONFIDENTIALITY</h3>
                        <p>6.1 <strong>Confidential Information.</strong> Each party may have access to confidential information of the other party, including business plans, pricing, customer information, and technical information. Each party agrees to maintain such information in confidence and not disclose it to third parties without prior written consent.</p>
                        <p>6.2 <strong>Exceptions.</strong> Confidential information does not include information that: (a) is publicly available; (b) was known to the receiving party prior to disclosure; (c) is independently developed; or (d) is disclosed pursuant to legal requirement.</p>

                        <h3>7. TERM AND TERMINATION</h3>
                        <p>7.1 <strong>Term.</strong> This Agreement shall commence on the Effective Date and continue for an initial term of one (1) year, automatically renewing for successive one-year terms unless terminated as provided herein.</p>
                        <p>7.2 <strong>Termination for Convenience.</strong> Either party may terminate this Agreement for any reason upon ninety (90) days' written notice to the other party.</p>
                        <p>7.3 <strong>Termination for Cause.</strong> Either party may terminate this Agreement immediately upon written notice if the other party: (a) materially breaches this Agreement and fails to cure within thirty (30) days of notice; (b) becomes insolvent or subject to bankruptcy proceedings; or (c) ceases business operations.</p>
                        <p>7.4 <strong>Effect of Termination.</strong> Upon termination, Reseller shall: (a) immediately cease marketing and selling the Platform; (b) return or destroy all Clover ERA confidential information and marketing materials; and (c) receive commissions for sales completed prior to termination in accordance with Section 3.</p>

                        <h3>8. WARRANTIES AND DISCLAIMERS</h3>
                        <p>8.1 <strong>Mutual Warranties.</strong> Each party warrants that it has the full right and authority to enter into this Agreement and perform its obligations hereunder.</p>
                        <p>8.2 <strong>Reseller Warranties.</strong> Reseller warrants that it shall: (a) comply with all applicable laws; (b) not make any false or misleading statements regarding the Platform; and (c) not engage in any deceptive or unethical business practices.</p>
                        <p>8.3 <strong>Disclaimer.</strong> EXCEPT AS EXPRESSLY PROVIDED IN THIS AGREEMENT, CLOVER ERA MAKES NO WARRANTIES, EXPRESS OR IMPLIED, INCLUDING WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.</p>

                        <h3>9. LIMITATION OF LIABILITY</h3>
                        <p>9.1 <strong>Limitation.</strong> NEITHER PARTY SHALL BE LIABLE FOR ANY INDIRECT, INCIDENTAL, CONSEQUENTIAL, SPECIAL, OR PUNITIVE DAMAGES ARISING OUT OF THIS AGREEMENT, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.</p>
                        <p>9.2 <strong>Cap.</strong> EACH PARTY'S TOTAL LIABILITY UNDER THIS AGREEMENT SHALL NOT EXCEED THE TOTAL COMMISSIONS PAID TO RESELLER IN THE TWELVE (12) MONTHS PRECEDING THE CLAIM.</p>

                        <h3>10. INDEMNIFICATION</h3>
                        <p>10.1 <strong>By Reseller.</strong> Reseller shall indemnify, defend, and hold harmless Clover ERA from any claims, damages, or expenses arising from: (a) Reseller's breach of this Agreement; (b) Reseller's negligence or misconduct; or (c) Reseller's violation of applicable laws.</p>
                        <p>10.2 <strong>By Clover ERA.</strong> Clover ERA shall indemnify, defend, and hold harmless Reseller from any claims that the Platform infringes any third-party intellectual property rights.</p>

                        <h3>11. INDEPENDENT CONTRACTOR</h3>
                        <p>Reseller is an independent contractor and not an employee, agent, partner, or joint venturer of Clover ERA. Reseller has no authority to bind Clover ERA or make any commitments on its behalf.</p>

                        <h3>12. GENERAL PROVISIONS</h3>
                        <p>12.1 <strong>Governing Law.</strong> This Agreement shall be governed by the laws of the State of Delaware, without regard to conflicts of law principles.</p>
                        <p>12.2 <strong>Dispute Resolution.</strong> Any disputes arising under this Agreement shall first be attempted to be resolved through good faith negotiation. If not resolved within thirty (30) days, disputes shall be submitted to binding arbitration in Wilmington, Delaware.</p>
                        <p>12.3 <strong>Assignment.</strong> Neither party may assign this Agreement without the prior written consent of the other party, except that Clover ERA may assign to an affiliate or in connection with a merger or acquisition.</p>
                        <p>12.4 <strong>Entire Agreement.</strong> This Agreement constitutes the entire agreement between the parties and supersedes all prior agreements and understandings, whether written or oral.</p>
                        <p>12.5 <strong>Amendments.</strong> This Agreement may only be amended by a written instrument signed by both parties.</p>
                        <p>12.6 <strong>Notices.</strong> All notices under this Agreement shall be in writing and delivered by email or certified mail to the addresses set forth above.</p>
                        <p>12.7 <strong>Severability.</strong> If any provision of this Agreement is found to be invalid or unenforceable, the remaining provisions shall remain in full force and effect.</p>
                        <p>12.8 <strong>Waiver.</strong> No waiver of any provision of this Agreement shall be deemed or constitute a waiver of any other provision.</p>

                        <p style="margin-top: 2rem;"><strong>IN WITNESS WHEREOF</strong>, the parties have executed this Agreement as of the Effective Date.</p>
                    </div>

                    <div class="btn-navigation">
                        <button class="btn btn-secondary" onclick="goToStep(1)">‚Üê Back</button>
                        <button class="btn btn-primary" onclick="goToStep(3)">Continue to Sign ‚Üí</button>
                    </div>
                </div>

                <!-- Step 3: Sign & Download -->
                <div class="form-section" id="step3">
                    <h3 class="section-title">Electronic Signatures</h3>

                    <div class="info-box">
                        <strong>Legal Notice:</strong> By signing below electronically, you agree that your electronic signature is the legal equivalent of your manual signature and you consent to be bound by this Agreement.
                    </div>

                    <div class="signature-section">
                        <h4 style="margin-bottom: 1rem;">Reseller Signature</h4>
                        <p style="margin-bottom: 1rem; color: var(--text-secondary);">
                            <strong><span id="signName"></span></strong>, <span id="signTitle"></span><br>
                            <span id="signCompany"></span>
                        </p>
                        <canvas id="resellerSignature" class="signature-canvas"></canvas>
                        <div class="signature-controls">
                            <button class="btn btn-clear" onclick="clearSignature('resellerSignature')">Clear Signature</button>
                        </div>
                    </div>

                    <div class="signature-section">
                        <h4 style="margin-bottom: 1rem;">Clover ERA Signature</h4>
                        <p style="margin-bottom: 1rem; color: var(--text-secondary);">
                            <strong>John Smith</strong>, Chief Executive Officer<br>
                            Clover ERA LLC
                        </p>
                        <canvas id="cloverSignature" class="signature-canvas"></canvas>
                        <div class="signature-controls">
                            <button class="btn btn-clear" onclick="clearSignature('cloverSignature')">Clear Signature</button>
                        </div>
                    </div>

                    <div class="download-section" style="margin-top: 3rem;">
                        <h3>Generate Your Signed Agreement</h3>
                        <p>Once both parties have signed, click below to download your completed agreement as a PDF.</p>
                        <button class="btn btn-primary" onclick="generatePDF()" style="margin-top: 1rem; font-size: 1.2rem; padding: 1rem 2.5rem;">
                            üìÑ Download Signed Agreement (PDF)
                        </button>
                    </div>

                    <div class="btn-navigation">
                        <button class="btn btn-secondary" onclick="goToStep(2)">‚Üê Back</button>
                        <div></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Form data storage
        let formData = {};

        // Signature canvas setup
        let resellerCanvas, cloverCanvas;
        let resellerCtx, cloverCtx;
        let isDrawing = false;

        document.addEventListener('DOMContentLoaded', function() {
            setupSignatureCanvases();
        });

        function setupSignatureCanvases() {
            // Reseller signature
            resellerCanvas = document.getElementById('resellerSignature');
            resellerCtx = resellerCanvas.getContext('2d');
            resellerCanvas.width = resellerCanvas.offsetWidth;
            resellerCanvas.height = 200;
            setupCanvasEvents(resellerCanvas, resellerCtx);

            // Clover signature
            cloverCanvas = document.getElementById('cloverSignature');
            cloverCtx = cloverCanvas.getContext('2d');
            cloverCanvas.width = cloverCanvas.offsetWidth;
            cloverCanvas.height = 200;
            setupCanvasEvents(cloverCanvas, cloverCtx);
        }

        function setupCanvasEvents(canvas, ctx) {
            let drawing = false;

            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);

            canvas.addEventListener('touchstart', handleTouch);
            canvas.addEventListener('touchmove', handleTouch);
            canvas.addEventListener('touchend', stopDrawing);

            function startDrawing(e) {
                drawing = true;
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                ctx.beginPath();
                ctx.moveTo(x, y);
            }

            function draw(e) {
                if (!drawing) return;
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                ctx.lineTo(x, y);
                ctx.strokeStyle = '#000';
                ctx.lineWidth = 2;
                ctx.lineCap = 'round';
                ctx.stroke();
            }

            function stopDrawing() {
                drawing = false;
            }

            function handleTouch(e) {
                e.preventDefault();
                const touch = e.touches[0];
                const mouseEvent = new MouseEvent(e.type === 'touchstart' ? 'mousedown' : 'mousemove', {
                    clientX: touch.clientX,
                    clientY: touch.clientY
                });
                canvas.dispatchEvent(mouseEvent);
            }
        }

        function clearSignature(canvasId) {
            const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        function goToStep(stepNumber) {
            // Validate current step before proceeding
            if (stepNumber === 2) {
                if (!validateStep1()) return;
                updatePreview();
            }

            // Update step indicators
            document.querySelectorAll('.step').forEach(step => {
                const num = parseInt(step.dataset.step);
                step.classList.remove('active', 'completed');
                if (num === stepNumber) {
                    step.classList.add('active');
                } else if (num < stepNumber) {
                    step.classList.add('completed');
                }
            });

            // Show/hide form sections
            document.querySelectorAll('.form-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById('step' + stepNumber).classList.add('active');

            // Update signature section if going to step 3
            if (stepNumber === 3) {
                updateSignatureSection();
            }

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function validateStep1() {
            const requiredFields = [
                'effectiveDate', 'companyName', 'entityType', 'jurisdiction',
                'businessAddress', 'signatoryName', 'signatoryTitle',
                'signatoryEmail', 'signatoryPhone'
            ];

            for (let field of requiredFields) {
                const input = document.getElementById(field);
                if (!input.value.trim()) {
                    alert('Please fill in all required fields');
                    input.focus();
                    return false;
                }
            }

            // Store form data
            requiredFields.forEach(field => {
                formData[field] = document.getElementById(field).value;
            });

            return true;
        }

        function updatePreview() {
            const dateObj = new Date(formData.effectiveDate);
            const formattedDate = dateObj.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });

            document.getElementById('previewDate').textContent = formattedDate;
            document.getElementById('previewCompany').textContent = formData.companyName;
            document.getElementById('previewEntity').textContent = formData.entityType;
            document.getElementById('previewJurisdiction').textContent = formData.jurisdiction;
            document.getElementById('previewAddress').textContent = formData.businessAddress.replace(/\n/g, ', ');
        }

        function updateSignatureSection() {
            document.getElementById('signName').textContent = formData.signatoryName;
            document.getElementById('signTitle').textContent = formData.signatoryTitle;
            document.getElementById('signCompany').textContent = formData.companyName;
        }

        function generatePDF() {
            // Check if signatures exist
            const resellerCanvas = document.getElementById('resellerSignature');
            const cloverCanvas = document.getElementById('cloverSignature');

            const resellerCtx = resellerCanvas.getContext('2d');
            const cloverCtx = cloverCanvas.getContext('2d');

            const resellerData = resellerCtx.getImageData(0, 0, resellerCanvas.width, resellerCanvas.height);
            const cloverData = cloverCtx.getImageData(0, 0, cloverCanvas.width, cloverCanvas.height);

            let resellerHasSignature = false;
            let cloverHasSignature = false;

            for (let i = 0; i < resellerData.data.length; i += 4) {
                if (resellerData.data[i + 3] > 0) {
                    resellerHasSignature = true;
                    break;
                }
            }

            for (let i = 0; i < cloverData.data.length; i += 4) {
                if (cloverData.data[i + 3] > 0) {
                    cloverHasSignature = true;
                    break;
                }
            }

            if (!resellerHasSignature || !cloverHasSignature) {
                alert('Please ensure both parties have signed the agreement before downloading.');
                return;
            }

            // Generate PDF
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            let yPosition = 20;
            const pageHeight = doc.internal.pageSize.height;
            const margin = 20;
            const maxWidth = 170;

            // Helper function to add text with page breaks
            function addText(text, fontSize = 10, isBold = false) {
                doc.setFontSize(fontSize);
                doc.setFont(undefined, isBold ? 'bold' : 'normal');

                const lines = doc.splitTextToSize(text, maxWidth);
                lines.forEach(line => {
                    if (yPosition > pageHeight - 20) {
                        doc.addPage();
                        yPosition = 20;
                    }
                    doc.text(line, margin, yPosition);
                    yPosition += fontSize * 0.5;
                });
                yPosition += 5;
            }

            // Title
            doc.setFontSize(16);
            doc.setFont(undefined, 'bold');
            doc.text('CLOVER ERA RESELLER AGREEMENT', 105, yPosition, { align: 'center' });
            yPosition += 15;

            // Date and parties
            const dateObj = new Date(formData.effectiveDate);
            const formattedDate = dateObj.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });

            addText(`This Reseller Agreement ("Agreement") is entered into as of ${formattedDate} ("Effective Date"), by and between:`);
            addText('Clover ERA LLC, a Delaware limited liability company with its principal place of business at 1234 Business Blvd, Suite 100, Wilmington, DE 19801 ("Clover ERA" or "Company"), and', 10, true);
            addText(`${formData.companyName}, a ${formData.entityType} organized under the laws of ${formData.jurisdiction}, with its principal place of business at ${formData.businessAddress.replace(/\n/g, ', ')} ("Reseller").`, 10, true);

            // Recitals
            addText('RECITALS', 12, true);
            addText('WHEREAS, Clover ERA has developed and operates a manager enablement platform (the "Platform") designed to help organizations improve employee engagement and reduce workplace turnover;');
            addText('WHEREAS, Reseller desires to market, promote, and resell licenses to the Platform to end customers; and');
            addText('WHEREAS, the parties wish to establish the terms and conditions under which Reseller will resell the Platform.');
            addText('NOW, THEREFORE, in consideration of the mutual covenants and agreements set forth herein, the parties agree as follows:');

            // Agreement sections (abbreviated for PDF)
            const sections = [
                { title: '1. APPOINTMENT AND SCOPE', content: 'Clover ERA hereby appoints Reseller as a non-exclusive reseller of the Platform within the United States and such other territories as may be mutually agreed upon in writing.' },
                { title: '2. RESELLER OBLIGATIONS', content: 'Reseller shall use commercially reasonable efforts to market, promote, and sell licenses to the Platform and comply with all applicable laws, regulations, and Clover ERA brand guidelines.' },
                { title: '3. PRICING AND COMMISSIONS', content: 'Reseller shall receive commissions on Platform license sales in accordance with the Commission Structure. Commissions are paid monthly within thirty (30) days following the end of each calendar month.' },
                { title: '4. CUSTOMER RELATIONSHIPS', content: 'All end customers shall enter into Clover ERA\'s standard customer agreement. Clover ERA shall provide technical support and customer service.' },
                { title: '5. INTELLECTUAL PROPERTY', content: 'Clover ERA retains all rights to the Platform. Reseller receives a limited license to use Clover ERA\'s trademarks solely for marketing purposes under this Agreement.' },
                { title: '6. CONFIDENTIALITY', content: 'Each party agrees to maintain confidential information in confidence and not disclose it to third parties without prior written consent.' },
                { title: '7. TERM AND TERMINATION', content: 'This Agreement continues for one (1) year, automatically renewing unless terminated with ninety (90) days\' written notice.' },
                { title: '8. WARRANTIES AND DISCLAIMERS', content: 'Each party warrants authority to enter this Agreement. CLOVER ERA MAKES NO WARRANTIES BEYOND THOSE EXPRESSLY STATED HEREIN.' },
                { title: '9. LIMITATION OF LIABILITY', content: 'NEITHER PARTY SHALL BE LIABLE FOR INDIRECT, INCIDENTAL, OR CONSEQUENTIAL DAMAGES. LIABILITY IS CAPPED AT COMMISSIONS PAID IN THE PRIOR 12 MONTHS.' },
                { title: '10. GENERAL PROVISIONS', content: 'This Agreement is governed by Delaware law. It constitutes the entire agreement between parties and may only be amended in writing signed by both parties.' }
            ];

            sections.forEach(section => {
                addText(section.title, 11, true);
                addText(section.content);
            });

            // Signatures
            if (yPosition > pageHeight - 100) {
                doc.addPage();
                yPosition = 20;
            }

            addText('IN WITNESS WHEREOF, the parties have executed this Agreement as of the Effective Date.', 10, true);
            yPosition += 10;

            // Reseller signature
            doc.text('RESELLER:', margin, yPosition);
            yPosition += 10;

            const resellerSigImage = resellerCanvas.toDataURL();
            doc.addImage(resellerSigImage, 'PNG', margin, yPosition, 60, 20);
            yPosition += 25;

            doc.text(`Name: ${formData.signatoryName}`, margin, yPosition);
            yPosition += 7;
            doc.text(`Title: ${formData.signatoryTitle}`, margin, yPosition);
            yPosition += 7;
            doc.text(`Date: ${formattedDate}`, margin, yPosition);
            yPosition += 15;

            // Clover ERA signature
            doc.text('CLOVER ERA LLC:', margin, yPosition);
            yPosition += 10;

            const cloverSigImage = cloverCanvas.toDataURL();
            doc.addImage(cloverSigImage, 'PNG', margin, yPosition, 60, 20);
            yPosition += 25;

            doc.text('Name: John Smith', margin, yPosition);
            yPosition += 7;
            doc.text('Title: Chief Executive Officer', margin, yPosition);
            yPosition += 7;
            doc.text(`Date: ${formattedDate}`, margin, yPosition);

            // Save PDF
            const fileName = `Clover_ERA_Reseller_Agreement_${formData.companyName.replace(/[^a-z0-9]/gi, '_')}_${formData.effectiveDate}.pdf`;
            doc.save(fileName);

            // Show success message
            alert('Your signed Reseller Agreement has been downloaded successfully! Please save it for your records.');
        }
    </script>
</body>
</html>
